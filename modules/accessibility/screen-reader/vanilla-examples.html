<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Screen Reader Accessibility - Vanilla JS Examples</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f172a; color: #e2e8f0;
      max-width: 900px; margin: 0 auto; padding: 2rem;
      line-height: 1.6;
    }
    h1 { color: #38bdf8; } h2 { color: #818cf8; margin-top: 3rem; }
    .example { background: #1e293b; border-radius: 0.75rem; padding: 1.5rem; margin: 1rem 0; border: 1px solid #334155; }
    .bad { border-color: #ef4444; } .good { border-color: #22c55e; }
    .label { font-size: 0.75rem; font-weight: bold; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; }
    .label.bad-label { color: #ef4444; } .label.good-label { color: #22c55e; }
    code { background: #334155; padding: 0.2em 0.4em; border-radius: 0.25rem; font-size: 0.9em; }

    /* Visually hidden but accessible to screen readers */
    .sr-only {
      position: absolute; width: 1px; height: 1px;
      padding: 0; margin: -1px; overflow: hidden;
      clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
    }
    .btn { background: #3b82f6; color: white; border: none; padding: 0.5rem 1.25rem; border-radius: 0.5rem; cursor: pointer; font-size: 1rem; margin: 0.25rem; }
    .btn:focus-visible { outline: 3px solid #38bdf8; outline-offset: 2px; }
    input, select { background: #1e293b; color: #e2e8f0; border: 1px solid #475569; padding: 0.5rem; border-radius: 0.375rem; font-size: 1rem; }
    input:focus, select:focus { outline: 2px solid #38bdf8; border-color: #38bdf8; }
    label { display: block; margin-bottom: 0.25rem; font-weight: 500; }

    .toast { background: #22c55e; color: white; padding: 0.75rem 1.25rem; border-radius: 0.5rem; margin-top: 0.5rem; display: none; }
    .toast.visible { display: block; }
    .error-msg { color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem; }
    .cart-count { background: #ef4444; color: white; font-size: 0.75rem; padding: 0.1rem 0.4rem; border-radius: 999px; vertical-align: super; }
  </style>
</head>
<body>

  <!-- ‚úÖ Proper document structure with landmarks -->
  <header role="banner">
    <h1>Screen Reader Examples</h1>
    <p>Enable VoiceOver (<code>Cmd+F5</code> on Mac) and navigate these examples.</p>
  </header>

  <nav aria-label="Main navigation">
    <a href="#forms">Forms</a> |
    <a href="#live-regions">Live Regions</a> |
    <a href="#images">Images</a> |
    <a href="#landmarks">Landmarks</a>
  </nav>

  <main id="main-content">

    <!-- ============================================
         1. PROPER HEADINGS HIERARCHY
         ============================================ -->
    <section aria-labelledby="headings-title">
      <h2 id="headings-title">1. Heading Hierarchy</h2>

      <div class="example bad">
        <div class="label bad-label">‚ùå Bad ‚Äî no heading structure</div>
        <div style="font-size:1.5rem;font-weight:bold;">This looks like a heading</div>
        <div style="font-size:1.2rem;font-weight:bold;">This also looks like one</div>
        <p>Screen reader can't navigate by headings. Skips these entirely.</p>
      </div>

      <div class="example good">
        <div class="label good-label">‚úÖ Good ‚Äî proper h2/h3 hierarchy</div>
        <h3>This IS a heading (h3)</h3>
        <h4>This IS a sub-heading (h4)</h4>
        <p>Screen reader users can press <code>H</code> to jump between headings.</p>
      </div>
    </section>


    <!-- ============================================
         2. FORM ACCESSIBILITY
         ============================================ -->
    <section id="forms" aria-labelledby="forms-title">
      <h2 id="forms-title">2. Accessible Forms</h2>

      <div class="example bad">
        <div class="label bad-label">‚ùå Bad ‚Äî no labels</div>
        <input type="text" placeholder="Enter your name">
        <p style="font-size:0.85rem;color:#94a3b8;margin-top:0.5rem;">
          Screen reader says "edit text" ‚Äî user has no idea what to type.
        </p>
      </div>

      <div class="example good">
        <div class="label good-label">‚úÖ Good ‚Äî proper labels, descriptions, validation</div>
        <form id="demo-form" novalidate>
          <div style="margin-bottom:1rem;">
            <label for="email-input">Email address</label>
            <input
              type="email"
              id="email-input"
              aria-describedby="email-help email-error"
              aria-required="true"
              aria-invalid="false"
              style="width:100%;"
            >
            <div id="email-help" style="font-size:0.85rem;color:#94a3b8;">
              We'll never share your email.
            </div>
            <div id="email-error" class="error-msg" role="alert" style="display:none;">
              Please enter a valid email address.
            </div>
          </div>

          <div style="margin-bottom:1rem;">
            <label for="password-input">Password</label>
            <input
              type="password"
              id="password-input"
              aria-required="true"
              aria-describedby="password-requirements"
              style="width:100%;"
            >
            <div id="password-requirements" style="font-size:0.85rem;color:#94a3b8;">
              Must be at least 8 characters with a number.
            </div>
          </div>

          <button type="submit" class="btn">Create Account</button>
        </form>
      </div>
    </section>


    <!-- ============================================
         3. LIVE REGIONS
         ============================================ -->
    <section id="live-regions" aria-labelledby="live-title">
      <h2 id="live-title">3. Live Regions (Dynamic Announcements)</h2>

      <!-- Polite: announced when idle -->
      <div class="example good">
        <div class="label good-label">‚úÖ aria-live="polite" ‚Äî non-urgent update</div>
        <button class="btn" id="add-to-cart-btn">Add to Cart</button>
        <span id="cart-status" aria-live="polite" aria-atomic="true"></span>

        <div id="toast-success" class="toast" role="status">
          Item added to cart!
        </div>
      </div>

      <!-- Assertive: interrupts and announces immediately -->
      <div class="example good">
        <div class="label good-label">‚úÖ role="alert" ‚Äî urgent announcement</div>
        <button class="btn" id="trigger-error-btn">Trigger Error</button>
        <div id="error-alert" role="alert" style="display:none;color:#ef4444;margin-top:0.5rem;">
          ‚ö†Ô∏è Connection lost. Please check your internet.
        </div>
      </div>

      <!-- Search results count -->
      <div class="example good">
        <div class="label good-label">‚úÖ Search results announcement</div>
        <label for="search-input">Search products</label>
        <input type="search" id="search-input" style="width:100%;" placeholder="Type to search...">
        <div id="search-results" aria-live="polite" aria-atomic="true" style="margin-top:0.5rem;color:#94a3b8;">
        </div>
      </div>
    </section>


    <!-- ============================================
         4. IMAGES
         ============================================ -->
    <section id="images" aria-labelledby="images-title">
      <h2 id="images-title">4. Image alt Text</h2>

      <div class="example bad">
        <div class="label bad-label">‚ùå Bad ‚Äî missing or useless alt</div>
        <p><code>&lt;img src="chart.png"&gt;</code> ‚Äî no alt ‚Üí "image" announced</p>
        <p><code>&lt;img src="chart.png" alt="chart"&gt;</code> ‚Äî useless description</p>
        <p><code>&lt;img src="photo.jpg" alt="IMG_20240123.jpg"&gt;</code> ‚Äî filename as alt</p>
      </div>

      <div class="example good">
        <div class="label good-label">‚úÖ Good ‚Äî meaningful alt text</div>
        <p><code>&lt;img src="chart.png" alt="Sales increased 40% in Q4 2024"&gt;</code></p>
        <p><code>&lt;img src="icon.svg" alt="" role="presentation"&gt;</code> ‚Äî decorative (hidden)</p>
        <p><code>&lt;img src="close.svg" alt="Close dialog"&gt;</code> ‚Äî functional</p>
      </div>
    </section>


    <!-- ============================================
         5. LANDMARKS
         ============================================ -->
    <section id="landmarks" aria-labelledby="landmarks-title">
      <h2 id="landmarks-title">5. Landmark Roles</h2>

      <div class="example good">
        <div class="label good-label">‚úÖ Semantic HTML ‚Üí automatic landmarks</div>
        <pre style="color:#94a3b8;font-size:0.85rem;overflow-x:auto;">
&lt;header&gt;    ‚Üí banner landmark
&lt;nav&gt;       ‚Üí navigation landmark
&lt;main&gt;      ‚Üí main landmark
&lt;aside&gt;     ‚Üí complementary landmark
&lt;footer&gt;    ‚Üí contentinfo landmark
&lt;section aria-label="..."&gt; ‚Üí region landmark
&lt;form aria-label="..."&gt;   ‚Üí form landmark</pre>
        <p style="font-size:0.85rem;color:#94a3b8;">
          Screen reader users press <code>D</code> (NVDA) or use rotor to jump between landmarks.
        </p>
      </div>
    </section>


    <!-- ============================================
         6. VISUALLY HIDDEN TEXT
         ============================================ -->
    <section aria-labelledby="sr-only-title">
      <h2 id="sr-only-title">6. Visually Hidden (Screen Reader Only)</h2>

      <div class="example good">
        <div class="label good-label">‚úÖ Extra context for screen readers</div>

        <button class="btn">
          üõí Cart
          <span class="cart-count">3</span>
          <span class="sr-only">items in cart</span>
        </button>
        <p style="font-size:0.85rem;color:#94a3b8;margin-top:0.5rem;">
          Sighted users see "üõí Cart 3". Screen reader says "Cart, 3 items in cart, button".
        </p>

        <button class="btn" aria-label="Close notification" style="margin-top:0.5rem;">
          ‚úï
        </button>
        <p style="font-size:0.85rem;color:#94a3b8;margin-top:0.5rem;">
          Sighted users see "‚úï". Screen reader says "Close notification, button".
        </p>
      </div>
    </section>

  </main>

  <footer role="contentinfo" style="margin-top:3rem;padding-top:1rem;border-top:1px solid #334155;color:#64748b;">
    <p>Keyboard Accessibility Examples - System Design Learning</p>
  </footer>

  <script>
    // Form validation with live error announcement
    const form = document.getElementById('demo-form');
    const emailInput = document.getElementById('email-input');
    const emailError = document.getElementById('email-error');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = emailInput.value;

      if (!email || !email.includes('@')) {
        emailInput.setAttribute('aria-invalid', 'true');
        emailError.style.display = 'block'; // role="alert" triggers announcement
        emailInput.focus();
      } else {
        emailInput.setAttribute('aria-invalid', 'false');
        emailError.style.display = 'none';
      }
    });

    // Live region: Add to cart
    let cartCount = 0;
    const cartBtn = document.getElementById('add-to-cart-btn');
    const cartStatus = document.getElementById('cart-status');
    const toast = document.getElementById('toast-success');

    cartBtn.addEventListener('click', () => {
      cartCount++;
      // Update live region ‚Üí screen reader announces this
      cartStatus.textContent = `${cartCount} item${cartCount > 1 ? 's' : ''} in cart`;

      toast.classList.add('visible');
      setTimeout(() => toast.classList.remove('visible'), 2000);
    });

    // Live region: Error alert
    const errorBtn = document.getElementById('trigger-error-btn');
    const errorAlert = document.getElementById('error-alert');

    errorBtn.addEventListener('click', () => {
      errorAlert.style.display = 'block'; // role="alert" ‚Üí immediately announced
      setTimeout(() => { errorAlert.style.display = 'none'; }, 3000);
    });

    // Live region: Search results
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');
    const products = ['iPhone', 'iPad', 'MacBook', 'AirPods', 'Apple Watch', 'iMac'];

    let searchTimeout;
    searchInput.addEventListener('input', () => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        const query = searchInput.value.toLowerCase();
        if (!query) {
          searchResults.textContent = '';
          return;
        }
        const matches = products.filter(p => p.toLowerCase().includes(query));
        // Announced by screen reader because of aria-live="polite"
        searchResults.textContent = `${matches.length} result${matches.length !== 1 ? 's' : ''} found`;
      }, 300);
    });
  </script>
</body>
</html>
